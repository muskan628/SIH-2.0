<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notes Dashboard</title>
<link rel="stylesheet" href="/static/css/common.css">
<link rel="stylesheet" href="/static/css/student-notes.css">
</head>
<body>

<!-- Hamburger -->
<div class="hamburger" id="hamburger">☰</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <h2>Menu</h2>
    <ul>
  <li><a href="{{ url_for('student_dashboard') }}">🏠 Home</a></li>
  <li><a href="{{ url_for('student_notes') }}">📘 Notes</a></li>
  <li><a href="{{ url_for('student_performance') }}">📊 Performance</a></li>
  <li><a href="{{ url_for('student_updates') }}">📝 Exams</a></li>
</ul>

</div>

<!-- Main Content -->
<div class="main">
  <div class="topbar">
    <h1>Notes</h1>
    <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
  </div>

  <div class="notes-container">
    <div id="notesList" class="course"></div>
  </div>
</div>

<script>
document.getElementById("hamburger").addEventListener("click", function() {
  document.getElementById("sidebar").classList.toggle("active");
});

async function loadNotes(){
  try{
    const res = await fetch('/api/notes');
    const data = await res.json();
    const list = document.getElementById('notesList');
    list.innerHTML = '';
    if(data && data.items){
      data.items.forEach(n => {
        const wrap = document.createElement('div');
        wrap.className = 'course';
        wrap.innerHTML = `
          <div class="course-header">${n.title || 'Note'} <span>+</span></div>
          <div class="course-content">
            <ul>
              <li>Subject: ${n.subject || ''}</li>
              <li>${n.description || ''}</li>
              ${n.file_url ? `<li><a href="${n.file_url}">Open</a></li>` : ''}
            </ul>
          </div>
        `;
        list.appendChild(wrap);
      });
    }
  }catch(e){ console.error('Failed to load notes', e); }
}
document.addEventListener('DOMContentLoaded', loadNotes);
</script>

</body>
</html>
