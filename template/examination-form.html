<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Examination Form - Akal University</title>
  <link rel="stylesheet" href="/static/css/examination-form.css">
  <style>
    :root {
      --primary: #1e3a8a;       /* Dark Blue */
      --primary-light: #2563eb; /* Hover Blue */
      --sidebar-width: 250px;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      min-height: 100vh;
      background: #f3f4f6;
    }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--primary);
      color: #fff;
      display: flex;
      flex-direction: column;
      padding: 20px 10px;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
    }

    .sidebar .brand {
      font-size: 22px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 30px;
    }

    .sidebar .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      margin: 6px 0;
      text-decoration: none;
      color: #fff;
      font-size: 16px;
      border-radius: 8px;
      transition: background 0.3s ease;
    }

    .sidebar .nav-link:hover {
      background: var(--primary-light);
    }

    .sidebar .emoji {
      margin-right: 10px;
      font-size: 18px;
    }

    .sidebar-footer {
      margin-top: auto;
      text-align: center;
      font-size: 14px;
      opacity: 0.8;
      padding-top: 15px;
    }

    /* Main Content */
    .main-content {
      margin-left: var(--sidebar-width);
      flex: 1;
      padding: 20px;
    }

    .navbar {
      display: flex;
      justify-content: right;
      align-items: center;
      margin-bottom: 20px;
      margin-left: 270px;
      width: 900px;
    }

    .logout-btn {
      background: var(--primary-light);
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .logout-btn:hover {
      background: #1d4ed8;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="brand">Smart Campus</div>

    <a class="nav-link" href="admin-attendance.html"><span class="emoji">üè†</span> Home </a>
    <a class="nav-link" href="upload_exam.html"><span class="emoji">üì§</span> Upload Exam</a>
    <a class="nav-link" href="quiz.html"><span class="emoji">üìù</span> Quiz</a>
    <a class="nav-link" href="student_records.html"><span class="emoji">üéì</span> Student Records</a>
    <a class="nav-link" href="attendance.html"><span class="emoji">üìã</span> Attendance</a>

    <div class="sidebar-footer">Logged in as Teacher</div>
  </aside>

  <!-- Main content -->
  <div class="main-content">
    <div class="navbar">
      <h1>Examination Form</h1>
      <button class="logout-btn" onclick="window.location.href='{{ url_for('logout') }}'">Logout</button>
    </div>

    <!-- Your existing form -->
    <div class="form-container">
      <form id="examinationForm">
        <!-- Top Info -->
        <div class="top-info">
          <div><label>Form Number</label><input type="number" name="formNumber" required></div>
          <div><label>AUID / Roll No</label><input type="number" name="auid" required></div>
          <div><label>Date</label><input type="date" name="date" required></div>
          <div><label>Programme</label><input type="text" name="programme" required></div>
          <div><label>Class</label><input type="text" name="class" required></div>
          <div><label>Semester</label><input type="text" name="semester" required></div>
        </div>

        <!-- Candidate Info -->
        <h3>Candidate Details</h3>
        <div class="candidate-info">
          <div><label>Candidate's Name</label><input type="text" name="candidateName" required></div>
          <div><label>Father's Name</label><input type="text" name="fatherName" required></div>
          <div><label>Mother's Name</label><input type="text" name="motherName" required></div>
        </div>
        <div class="candidate-info">
          <div style="flex:1 1 100%;"><label>Present Address</label><textarea name="address" rows="2" required></textarea></div>
        </div>
        <div class="candidate-info">
          <div><label>Mobile Number</label><input type="number" name="mobile" required></div>
          <div><label>Email</label><input type="email" name="email" required></div>
        </div>

        <!-- Courses Table -->
        <h3>Courses to be Examined</h3>
        <div class="table-responsive">
          <table class="courses-table">
            <thead>
              <tr>
                <th>S.No</th>
                <th>Course Title</th>
                <th>Course Type</th>
                <th>Course Code</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><textarea name="course1_title" rows="1"></textarea></td>
                <td><textarea name="course1_type" rows="1"></textarea></td>
                <td><textarea name="course1_code" rows="1"></textarea></td>
              </tr>
              <tr>
                <td>2</td>
                <td><textarea name="course2_title" rows="1"></textarea></td>
                <td><textarea name="course2_type" rows="1"></textarea></td>
                <td><textarea name="course2_code" rows="1"></textarea></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Last Year Result -->
        <h3>Result Status of Last Year Examination</h3>
        <div class="table-responsive">
          <table class="last-result">
            <thead>
              <tr>
                <th>Examination</th><th>Board / University</th><th>Session / Year</th>
                <th>AUID / Roll No</th><th>Pass</th><th>Re-appear</th><th>Grade / Percentage</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><textarea name="exam" rows="1"></textarea></td>
                <td><textarea name="board" rows="1"></textarea></td>
                <td><textarea name="session" rows="1"></textarea></td>
                <td><textarea name="roll" rows="1"></textarea></td>
                <td><textarea name="pass" rows="1"></textarea></td>
                <td><textarea name="reappear" rows="1"></textarea></td>
                <td><textarea name="grade" rows="1"></textarea></td>
              </tr>
            </tbody>
          </table>
        </div>

        <button type="submit" class="btn">Submit Form</button>
      </form>
    </div>
  </div>

  <script>
    document.getElementById('examinationForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const payload = {};
      form.querySelectorAll('input, textarea, select').forEach((el, idx) => {
        const key = el.name && el.name.trim() ? el.name : `field_${idx}`;
        payload[key] = el.value;
      });
      try {
        const res = await fetch('/api/examination-form', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (data.ok) {
          alert('Examination form saved (ID: ' + data.id + ')');
        } else {
          alert('Save failed: ' + (data.error || 'Unknown error'));
        }
      } catch (err) {
        alert('Network error: ' + err.message);
      }
    });
  </script>
</body>
</html>
